# Generated by /usr/local/bin/entrypoint.sh
// Default kea dhcpd options: can modify them here, add new ones to
// separate .conf files which will be included from /etc/kea.d
{
  "Dhcp4": {
    "interfaces-config": {
      "interfaces": [ "{{ SUBNET1_INTERFACE }}" ]
    },
    "dhcp-ddns": {
      "enable-updates": false
    },
    "allocator": "random",
    "host-reservation-identifiers": [ "hw-address" ],
    "lease-database": {
	"type": "mysql",
	"host": "{{ DB_HOST }}",
	"name": "{{ DB_NAME }}",
	"user": "{{ DB_USER }}",
	"password": "{{ DB_PASS }}"
    },
    "max-valid-lifetime": 14400,
    "valid-lifetime": 3600,
    "option-data": [
      {
        "space": "dhcp4",
        "name": "domain-name",
        "code": 15,
        "data": "{{ DOMAIN }}"
      },
      {
        "space": "dhcp4",
        "name": "domain-name-servers",
        "code": 6,
        "data": "{{ DNS_SERVER }}"
      },
      {
        "space": "dhcp4",
        "name": "ip-forwarding",
        "code": 19,
        "data": "false"
      },
      {
        "space": "dhcp4",
        "name": "ntp-servers",
        "code": 42,
        "data": "{{ NTP_SERVER }}"
      },
      {
        "space": "dhcp4",
        "name": "mask-supplier",
        "code": 30,
        "data": "false"
      },
      {
        "space": "dhcp4",
        "name": "netbios-node-type",
        "code": 46,
        "data": "8"
      },
      {
        "space": "dhcp4",
        "name": "tcode",
        "code": 101,
        "data": "{{ TZ }}"
      }
    ],
    <?include "/etc/kea.d/apc-rpdu.conf"?>
      //  "statement": {
      //    "config": {
      //      "value": "allow",
      //      "name": "boot-unknown-clients",
      //      "code": 6
      //    }
      //  },
      //  "statement": {
      //    "config": {
      //      "value": "ignore",
      //      "name": "client-updates",
      //      "code": 40
      //    }
      //  },
    "next-server": "{{ TFTP_SERVER }}",
    "hooks-libraries": [
      {
        "library": "libdhcp_mysql.so"
      }
    ],
    "loggers": [
      {
	"name": "kea-dhcp4",
	"output-options": [ { "output": "stdout" } ],
	"debuglevel": 0,
	"severity": "INFO"
      }
    ],
    <?include "/etc/kea.d/subnet.conf"?>
  }
}
